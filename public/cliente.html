<!doctype html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>AN Motos</title>
        <!-- Arquivo CSS para estiliza√ß√£o da p√°gina -->
        <link rel="stylesheet" href="cliente.css" />
        <!-- Arquivo JavaScript com fun√ß√µes de cliente -->
        <script src="cliente.js"></script>
    </head>
    <body>
        <!-- CABE√áALHO COM LOGOS -->
        <header class="header">
            <!-- Logo do Col√©gio CCMH -->
            <div class="logo">
                <img src="imagens/ccm.jpeg" alt="Col√©gio CCMH" />
            </div>

            <!-- Logo principal da empresa (AN Motos) com fundo tem√°tico de moto -->
            <div class="main-logo motorcycle-bg">
                <img src="imagens/an_motos.png" alt="RW Motos" />
            </div>

            <!-- Logo da AGAVI -->
            <div class="agave-logo">
                <img src="imagens/agavi.png" alt="Agave" />
            </div>
        </header>

        <!-- CONTAINER PRINCIPAL DO FORMUL√ÅRIO DE CADASTRO -->
        <div class="container">
            <div class="form-container">
                <h2 class="form-title">Cadastrar Cliente</h2>

                <form id="clienteForm">
                    <!-- PRIMEIRA LINHA: Dados Pessoais B√°sicos -->
                    <div class="form-row">
                        <!-- Campo: Nome do Cliente -->
                        <div class="form-group">
                            <input
                                type="text"
                                id="cli_nome"
                                name="nomeCliente"
                                placeholder="Nome do Cliente"
                                required
                            />
                        </div>

                        <!-- Campo: Data de Nascimento -->
                        <div class="form-group">
                            <input
                                type="text"
                                id="cli_data_nascimento"
                                name="dataNascimento"
                                placeholder="Data de nascimento"
                                required
                            />
                        </div>

                        <!-- Campo: Telefone (m√°ximo 15 caracteres, apenas n√∫meros) -->
                        <div class="form-group">
                            <input
                                type="tel"
                                id="cli_telefone"
                                name="telefone"
                                inputmode="numeric"
                                maxlength="15"
                                pattern="\d{15}"
                                placeholder="Telefone"
                                required
                            />
                        </div>

                        <!-- Campo: CPF (m√°ximo 14 caracteres com pontos e h√≠fen) -->
                        <div class="form-group">
                            <input
                                id="cli_cpf"
                                name="cpf"
                                type="text"
                                inputmode="numeric"
                                maxlength="14"
                                pattern="\d{14}"
                                placeholder="CPF"
                                required
                            />
                        </div>
                    </div>

                    <!-- SEGUNDA LINHA: Dados de Endere√ßo (Parte 1) -->
                    <div class="form-row">
                        <!-- Campo: CEP (com busca autom√°tica de endere√ßo) -->
                        <div class="form-group quarter">
                            <input
                                type="text"
                                id="cli_cep"
                                name="cep"
                                placeholder="CEP"
                                required
                                onblur="buscarEnderecoPorCEP()"
                            />
                        </div>

                        <!-- Campo: Cidade (preenchido automaticamente pelo CEP) -->
                        <div class="form-group quarter">
                            <input
                                type="text"
                                id="cli_cidade"
                                name="cidade"
                                placeholder="Cidade"
                            />
                        </div>

                        <!-- Campo: Bairro -->
                        <div class="form-group quarter">
                            <input
                                type="text"
                                id="cli_bairro"
                                name="bairro"
                                placeholder="Bairro"
                                required
                            />
                        </div>

                        <!-- Campo: Complemento (opcional) -->
                        <div class="form-group quarter">
                            <input
                                type="text"
                                id="cli_complemento"
                                name="complemento"
                                placeholder="Complemento"
                            />
                        </div>
                    </div>

                    <!-- TERCEIRA LINHA: Dados de Endere√ßo (Parte 2) e Email -->
                    <div class="form-row">
                        <!-- Campo: Nome da Rua -->
                        <div class="form-group">
                            <input
                                type="text"
                                id="cli_nome_rua"
                                name="nomeRua"
                                placeholder="Nome da Rua"
                                required
                            />
                        </div>

                        <!-- Campo: N√∫mero da Casa -->
                        <div class="form-group">
                            <input
                                type="text"
                                id="cli_numero_casa"
                                name="numeroCasa"
                                placeholder="N¬∫ Casa"
                                required
                            />
                        </div>

                        <!-- Campo: E-mail -->
                        <div class="form-group">
                            <input
                                type="email"
                                id="cli_email"
                                name="email"
                                placeholder="E-mail"
                                required
                            />
                        </div>
                    </div>

                    <!-- BOT√ïES DE A√á√ÉO DO FORMUL√ÅRIO -->
                    <div class="op√ß√µes">
                        <!-- Bot√£o para cadastrar novo cliente -->
                        <input
                            type="submit"
                            value="Cadastrar"
                            class="submit-btn"
                            onclick="cadastrarCliente(event)"
                        />
                        <!-- Bot√£o para limpar todos os campos -->
                        <input type="reset" value="Limpar" class="submit-btn" />
                        <!-- Bot√£o para atualizar cliente existente -->
                        <input
                            type="button"
                            value="Atualizar Cliente"
                            class="submit-btn"
                            onclick="atualizarCliente(); limpaCliente();"
                        />
                    </div>
                </form>
            </div>
        </div>

        <!-- SE√á√ÉO DE LISTAGEM DE CLIENTES -->
        <div class="container">
            <div class="client-section">
                <h2 class="section-title">Visualizar Cliente</h2>

                <!-- Bot√£o para carregar/listar todos os clientes -->
                <button
                    type="button"
                    onclick="listarClientes()"
                    class="alinhaBtns"
                >
                    Listar Clientes
                </button>

                <!-- Contador de clientes cadastrados -->
                <div class="client-stats">
                    <p>Total de clientes: <span id="totalClientes">0</span></p>
                </div>

                <!-- Tabela para exibir os clientes -->
                <div class="table-container">
                    <table class="client-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nome do Cliente</th>
                                <th>Telefone</th>
                                <th>CPF</th>
                                <th>Nome da Rua</th>
                                <th>N¬∫ Casa</th>
                                <th>E-mail</th>
                                <th>A√ß√µes</th>
                                <!-- Coluna para bot√µes de editar/excluir -->
                            </tr>
                        </thead>
                        <!-- Corpo da tabela preenchido dinamicamente via JavaScript -->
                        <tbody id="tabela-clientes"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- MODAL PARA EDI√á√ÉO DE CLIENTE -->
        <div id="clienteAtualizado" class="modal">
            <div class="modal-content">
                <!-- Cabe√ßalho do modal -->
                <div class="modal-header">
                    <h3>Editar Cliente</h3>
                    <!-- Bot√£o X para fechar o modal -->
                    <span class="close" onclick="closeModal()">&times;</span>
                </div>

                <!-- Corpo do modal com campos para edi√ß√£o -->
                <div class="modal-body">
                    <!-- Primeira linha de campos do modal -->
                    <div class="form-row">
                        <!-- ID √© readonly (n√£o pode ser alterado) -->
                        <input
                            type="text"
                            class="form-input"
                            placeholder="ID"
                            id="id_cli"
                            readonly
                        />
                        <input
                            type="text"
                            class="form-input"
                            placeholder="Nome do Cliente"
                            id="cli_nome"
                        />
                        <input
                            type="text"
                            class="form-input"
                            placeholder="data de nascimento"
                            id="cli_data_nascimento"
                        />
                        <input
                            type="text"
                            class="form-input"
                            placeholder="Telefone"
                            id="cli_telefone"
                        />
                    </div>

                    <!-- Segunda linha de campos do modal -->
                    <div class="form-row">
                        <input
                            type="text"
                            class="form-input"
                            placeholder="CPF"
                            id="cli_cpf"
                        />
                        <input
                            type="text"
                            class="form-input"
                            placeholder="CEP"
                            id="cli_cep"
                        />
                        <input
                            type="text"
                            class="form-input"
                            placeholder="Cidade"
                            id="cli_cidade"
                        />
                        <input
                            type="text"
                            class="form-input"
                            placeholder="Bairro"
                            id="cli_bairro"
                        />
                    </div>

                    <!-- Terceira linha de campos do modal -->
                    <div class="form-row">
                        <input
                            type="text"
                            class="form-input"
                            placeholder="Complemento"
                            id="cli_complemento"
                        />
                        <input
                            type="text"
                            class="form-input"
                            placeholder="Nome Rua"
                            id="cli_nome_rua"
                        />
                        <input
                            type="text"
                            class="form-input"
                            placeholder="N¬∫ Casa"
                            id="cli_numero_casa"
                        />
                        <input
                            type="email"
                            class="form-input"
                            placeholder="E-mail"
                            id="cli_email"
                        />
                    </div>

                    <!-- Bot√µes de a√ß√£o do modal -->
                    <div class="modal-buttons">
                        <!-- Bot√£o para salvar altera√ß√µes -->
                        <button class="save-btn" onclick="saveClient()">
                            üíæ Salvar
                        </button>
                        <!-- Bot√£o para cancelar e fechar modal -->
                        <button class="cancel-btn" onclick="closeModal()">
                            ‚ùå Cancelar
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- BOT√ÉO PARA VOLTAR √Ä P√ÅGINA INICIAL -->
        <div class="btn-voltar">
            <a href="index.html">VOLTAR</a>
        </div>

        <!-- SCRIPTS INLINE PARA M√ÅSCARAS DE ENTRADA -->
        <script>
            // M√°scara para CPF: Formata como 123.456.789-01
            document
                .querySelector('input[placeholder="CPF"]')
                .addEventListener("input", function (e) {
                    // Remove todos os caracteres n√£o num√©ricos
                    let value = e.target.value.replace(/\D/g, "");
                    // Adiciona o primeiro ponto ap√≥s 3 d√≠gitos
                    value = value.replace(/(\d{3})(\d)/, "$1.$2");
                    // Adiciona o segundo ponto ap√≥s mais 3 d√≠gitos
                    value = value.replace(/(\d{3})(\d)/, "$1.$2");
                    // Adiciona o h√≠fen antes dos √∫ltimos 2 d√≠gitos
                    value = value.replace(/(\d{3})(\d{1,2})$/, "$1-$2");
                    e.target.value = value;
                });

            // M√°scara para Telefone: Formata como (12) 34567-8901
            document
                .querySelector('input[placeholder="Telefone"]')
                .addEventListener("input", function (e) {
                    // Remove todos os caracteres n√£o num√©ricos
                    let value = e.target.value.replace(/\D/g, "");
                    // Adiciona par√™nteses no DDD
                    value = value.replace(/(\d{2})(\d)/, "($1) $2");
                    // Adiciona h√≠fen no n√∫mero
                    value = value.replace(/(\d{5})(\d)/, "$1-$2");
                    e.target.value = value;
                });
        </script>
    </body>
</html>
